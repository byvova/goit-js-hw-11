{"version":3,"file":"commonHelpers.js","sources":["../src/gallery-search.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst API_KEY = \"41828858-bc9e123a5e007e4f9a3f52776\";\nconst form = document.querySelector('.container');\nconst input = document.querySelector('input');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader')\n\nconst options = {\n    captionsData: 'alt',\n    captionDelay: 250,\n};\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n\n    try {\n        const searchQuery = encodeURIComponent(input.value.trim());\n        \n        if (!searchQuery) {\n            iziToast.error({\n                title: 'Invalid Input',\n                message: 'Please enter a search term.',\n            });\n            return;\n        }\n        loader.style.display = 'block';\n\n        const url = `https://pixabay.com/api/?key=${API_KEY}&q=${searchQuery}`;\n        const response = await fetch(url);\n\n        if (!response.ok) {\n            throw new Error('Failed to fetch images. Please try again later.');\n        }\n\n        const json = await response.json();\n        const hits = json.hits;\n\n        loader.style.display = 'none';\n\n        gallery.innerHTML = '';\n\n        if (hits.length === 0) {\n            iziToast.error({\n                title: 'No Results',\n                message: 'No images found. Please try a different search term.',\n            });\n            return;\n        }\n        gallery.innerHTML = hits.reduce((html, hit) => html + `\n            <li class=\"gallery-item\">\n                <a class=\"gallery-link\" href=\"${hit.webformatURL}\">\n                    <img class=\"gallery-image\" src=\"${hit.previewURL}\" alt=\"${hit.tags}\" />\n                </a>\n                <div class=\"content\">\n                    <h4 class=\"titles\">Likes</h4>\n                    <h4 class=\"titles\">Views</h4>\n                    <h4 class=\"titles\">Comments</h4>\n                    <h4 class=\"titles\">Downloads</h4>\n                    <p class=\"text\">${hit.likes}</p>\n                    <p class=\"text\">${hit.views}</p>\n                    <p class=\"text\">${hit.comments}</p>\n                    <p class=\"text\">${hit.downloads}</p>\n                </div>\n            </li>`, \"\");\n\n        const lightbox = new SimpleLightbox('.gallery a', options);\n    } catch (error) {\n        console.error('Error fetching data:', error);\n\n        if (error instanceof TypeError) {\n            iziToast.error({\n                title: 'Network Error',\n                message: 'Please check your internet connection and try again.',\n            });\n        } else {\n            iziToast.error({\n                title: 'Error',\n                message: error.message,\n            });\n        }\n    }\n});\n\n\n\n\n\n// це ще один спосіб але він трошки не дороблений\n\n// const API_KEY = \"41828858-bc9e123a5e007e4f9a3f52776\" \n\n// const form = document.querySelector('.container')\n// const button = document.querySelector('button')\n// const input = document.querySelector('input')\n// const gallery = document.querySelector('.gallery')\n\n// const options = {\n//     captionsData: 'alt', \n//     captionDelay: 250,  \n// };\n\n// form.addEventListener('submit', event => {\n//     event.preventDefault();\n\n//     const url = \"https://pixabay.com/api/?key=\" + API_KEY + \"&q=\" + encodeURIComponent(input.value);\n//     console.log(url);\n//     fetch(url, { method: \"GET\" })\n//         .then((res) => res.json())\n//         .then((json) => json.hits) // Return the hits array directly\n//         .then((hits) => {\n//             console.log(hits);\n\n//             gallery.innerHTML = hits.reduce((html, hit) => html + `\n//                 <li class=\"gallery-item\">\n//                     <a class=\"gallery-link\" href=\"${hit.webformatURL}\">\n//                         <img class=\"gallery-image\" src=\"${hit.previewURL}\" alt=\"${hit.tags}\" /></a>\n//                     <div class=\"content\">\n//                         <h4 class=\"titles\">Likes</h4>\n//                         <h4 class=\"titles\">Views</h4>\n//                         <h4 class=\"titles\">Comments</h4>\n//                         <h4 class=\"titles\">Downloads</h4>\n//                         <p class=\"text\">${hit.likes}</p>\n//                         <p class=\"text\">${hit.views}</p>\n//                         <p class=\"text\">${hit.comments}</p>\n//                         <p class=\"text\">${hit.downloads}</p>\n//                     </div>\n//                 </li>`, \"\");\n//         })\n//         .catch(error => {\n//             console.error('Error fetching data:', error);\n//         });\n// });\n\n// const lightbox = new SimpleLightbox('.gallery a', options);"],"names":["API_KEY","form","input","gallery","loader","options","event","searchQuery","iziToast","url","response","hits","html","hit","lightbox","SimpleLightbox","error"],"mappings":"6vBAOA,MAAMA,EAAU,qCACVC,EAAO,SAAS,cAAc,YAAY,EAC1CC,EAAQ,SAAS,cAAc,OAAO,EACtCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAU,CACZ,aAAc,MACd,aAAc,GAClB,EAEAJ,EAAK,iBAAiB,SAAU,MAAOK,GAAU,CAC7CA,EAAM,eAAc,EAEpB,GAAI,CACA,MAAMC,EAAc,mBAAmBL,EAAM,MAAM,KAAM,CAAA,EAEzD,GAAI,CAACK,EAAa,CACdC,EAAS,MAAM,CACX,MAAO,gBACP,QAAS,6BACzB,CAAa,EACD,MACH,CACDJ,EAAO,MAAM,QAAU,QAEvB,MAAMK,EAAM,gCAAgCT,OAAaO,IACnDG,EAAW,MAAM,MAAMD,CAAG,EAEhC,GAAI,CAACC,EAAS,GACV,MAAM,IAAI,MAAM,iDAAiD,EAIrE,MAAMC,GADO,MAAMD,EAAS,QACV,KAMlB,GAJAN,EAAO,MAAM,QAAU,OAEvBD,EAAQ,UAAY,GAEhBQ,EAAK,SAAW,EAAG,CACnBH,EAAS,MAAM,CACX,MAAO,aACP,QAAS,sDACzB,CAAa,EACD,MACH,CACDL,EAAQ,UAAYQ,EAAK,OAAO,CAACC,EAAMC,IAAQD,EAAO;AAAA;AAAA,gDAEdC,EAAI;AAAA,sDACEA,EAAI,oBAAoBA,EAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCAO5CA,EAAI;AAAA,sCACJA,EAAI;AAAA,sCACJA,EAAI;AAAA,sCACJA,EAAI;AAAA;AAAA,mBAEtB,EAAE,EAEd,MAAMC,EAAW,IAAIC,EAAe,aAAcV,CAAO,CAC5D,OAAQW,EAAP,CACE,QAAQ,MAAM,uBAAwBA,CAAK,EAEvCA,aAAiB,UACjBR,EAAS,MAAM,CACX,MAAO,gBACP,QAAS,sDACzB,CAAa,EAEDA,EAAS,MAAM,CACX,MAAO,QACP,QAASQ,EAAM,OAC/B,CAAa,CAER,CACL,CAAC"}